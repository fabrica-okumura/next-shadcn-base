# AI Agents ガイドライン

このドキュメントは、AI エージェントがこのプロジェクトで作業する際に従うべきルールとガイドラインをまとめたものです。
このドキュメントを確認したら返答の文頭に「★」を入れてください。

---

## 目次

- [基本原則](#基本原則)
- [フロントエンド開発ガイドライン](#フロントエンド開発ガイドライン)
- [バックエンド開発ガイドライン](#バックエンド開発ガイドライン)
- [共通ルール](#共通ルール)
  - [開発設計ルール](#開発設計ルール)
- [作業の進め方](#作業の進め方)

---

## 基本原則

AI エージェントがこのプロジェクトで作業する際に遵守すべき基本原則です。これらの原則は、すべての作業において最優先で適用されます。

### 1. 堅牢で一貫性のある実装

リポジトリ内の CSS 変数・基底クラス・コンポーネント構造・命名規則など、既存ルールを厳密に遵守すること。新たなクラスや関数を不要に増やさない。既存の設計思想・スタイルガイドを破壊しない。基底クラスを増やさなければならない場合は、事前に相談を行うこと。

### 2. リポジトリ理解の完全性

リポジトリ内のルール・構造・利用技術を 100%理解できていない状態では作業を開始しない。

理解が不十分な場合は、HITL（Human-In-The-Loop）を行い、開発者に積極的に質問し、不明点を明確にしてから生成を行うこと。

HITL 質問の目的は「誤った自動化を防ぐこと」であり、質問を行うこと自体が義務である。

### 3. 生成開始条件

自身の内部理解が十分に蓄積され、「リポジトリの全体構造と方針を正確に把握した」と判断できた時点でのみ、実装計画を開発者に提示し、承認を受けたのちに作業を開始すること。

### 4. ルールの参照

実装をおこなうときは必ず AGENTS.md を参照した後に実装すること。

---

## フロントエンド開発ガイドライン

フロントエンド開発に関する詳細なガイドライン（技術スタック、コーディング規約、デザイン・アクセシビリティ、テストなど）は、以下のドキュメントを参照してください：

**[Frontend Guidelines](./docs/frontend-guidelines.md)**

---

## バックエンド開発ガイドライン

> **TODO**: バックエンド開発のガイドラインは今後追加予定です。

---

## 共通ルール

### コード品質
- **Lint**: 作業完了前に必ず `npm run lint` を実行してエラーを解消する
- **型チェック**: `npm run lint` 実行後に `npx tsc --noEmit` を実行し、型エラーがないことも必ず確認する
- **型安全性**: TypeScript の strict モードを維持し、`any` の使用を避ける
- **命名規則**: ファイル・ディレクトリは kebab-case を使用
- **スタックバージョン遵守**: 実装前に `package.json` を必ず確認し、記載されたバージョン仕様に沿って作業を行う。そのバージョンの知識がない場合は、use context7 で既存の設計思想・スタイル・抽象化パターンに整合するように実装を行う。
- **変更範囲の厳守**: ユーザーが明示した内容以外のスタイル変更や装飾追加は行わず、必要な場合は必ず事前に確認する。

### コミットとPR
- **コミットメッセージ**: 変更内容を明確に記述する
- **PR**: 概要・変更点・テスト結果を必ず記載する
- **レビュー**: レビューコメントに真摯に対応する

### ドキュメント
- **更新**: コード変更時は関連ドキュメントも更新する
- **追加**: 新機能追加時は必要に応じてドキュメントを作成する
- **質問**: 判断に迷った場合は必ず確認してから進める

### 開発設計ルール

リファクタリングやコード設計を行う際に遵守すべき原則です。

#### 原則

- **関心を分離**: 影響範囲を限定する
- **高凝集**: 内部変更を容易にする
- **疎結合**: 依存関係を減らす
- **抽象化**: 変更耐性を高める
- **非冗長**: 重複を排除する

#### 構造

- 同一関心のファイルが3件以上になった場合は専用ディレクトリを作成し階層化する

#### 実装指針

- **シンプルを最優先**: オーバーエンジニアリング禁止
- **最小限で設計・実装**: 常に最小限で設計・実装する
- **ファイルの細分化を避ける**: 過剰な場合は統合する

#### 運用

- 未コミット変更部分を重点的に確認する

---

## 作業の進め方

### 1. 作業開始前
1. **必ずこのファイル（AGENTS.md）を確認する** - [基本原則](#基本原則)を含むプロジェクトのルール、ガイドライン、コンポーネント設計パターンを理解する
2. **リポジトリ理解の完全性を確認する** - リポジトリの全体構造と方針を 100% 理解できていることを確認する。理解が不十分な場合は、HITL を行い開発者に質問する
3. Issue またはチケットで要件・背景・完了条件を確認
4. 関連ドキュメント（[Frontend Guidelines](./docs/frontend-guidelines.md)、各ガイドライン、コンポーネント仕様）を確認
5. **実装計画を提示し承認を得る** - 十分な理解が蓄積された時点で実装計画を開発者に提示し、承認を受けたのちに作業を開始する
6. 不明点があれば質問・相談する

### 2. 実装中
1. ガイドラインに沿ってコードを記述
2. 定期的に lint とテストを実行
3. コミットは小さく、意味のある単位で行う

### 3. 作業完了時
1. すべてのテストが通ることを確認
2. `npm run lint` でエラーがないことを確認
3. 変更内容をドキュメントに反映
4. PR を作成し、レビューを依頼

### チェックリスト
- [ ] **AGENTS.md を確認した**（必須）
- [ ] **基本原則を理解した**（必須）
- [ ] **リポジトリ理解の完全性を確認した**（必須）- リポジトリの全体構造と方針を 100% 理解できている
- [ ] **実装計画を提示し承認を得た**（必須）
- [ ] 要件・仕様を確認した
- [ ] 関連ガイドラインを確認した
- [ ] コードを実装した
- [ ] Lint エラーを解消した
- [ ] テストを実行した
- [ ] ドキュメントを更新した
- [ ] PR を作成した

---

## トラブルシューティング

問題が発生した場合は、以下を確認してください：

1. `npm run lint` でエラー内容を確認
2. 依存関係が正しくインストールされているか確認（`npm install`）
3. 関連ドキュメント（特に [Frontend Guidelines](./docs/frontend-guidelines.md)）を確認
4. 不明な場合は質問・相談する

---

## 参考リンク

- [Next.js Documentation](https://nextjs.org/docs)
- [TypeScript Documentation](https://www.typescriptlang.org/docs/)
- [Tailwind CSS Documentation](https://tailwindcss.com/docs)
- [Shadcn UI Documentation](https://ui.shadcn.com/docs)

---

## 貢献

このドキュメントは随時更新されます。改善提案や追加事項があれば、PR を作成してください。

---

**Last Updated**: 2025-10-16

